<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <title>Document</title>
</head>

<style>
    body {
        background-color: white;
        color: black;
        text-align: center;
        justify-content: center;
    }

</style>
<body>

<div class="d-grid gap-2 col-6 mx-auto">
<h1 class="txt-center">Lyrics Search API</h1><br>

    <!-- DO NOT DELETE THE CODE BELOW -->
    <!-- <form action="/" method="post">
      <div class="input-group">
          <input type="text" class="form-control" name="search_artist" placeholder="Search artist" aria-label="Recipient's username" aria-describedby="basic-addon2">
          <div class="input-group-append">
            <button class="btn btn-primary" type="submit">Search</button>
          </div>
      </div>
  </form><br>


    <form action="/" method="post">
      <div class="input-group">
          <input type="text" class="form-control" name="search_lyrics" placeholder="Search lyrics" aria-label="Recipient's username" aria-describedby="basic-addon2">
          <div class="input-group-append">
            <button class="btn btn-primary" type="submit">Search</button>
          </div>
      </div>
  </form><br> -->

<form action="/" method="post">
  <input class="form-control form-control-lg" type="text" name="search_artist" placeholder="Search songs by artist" aria-label=".form-control-lg example"><br>
  <input class="form-control form-control-lg" type="text" name="search_lyrics" placeholder="Search lyrics" aria-label=".form-control-lg example"><br>
  <button type="submit" class="btn btn-primary">Search</button>
</form><br>



  
{% for song in songs %}
<!-- <div class="d-grid gap-2 col-6 mx-auto"> -->
    <a href="#" class="btn btn-primary btn-lg active" role="button" aria-pressed="true"><strong>{{song|safe}}</strong></a>
<!-- </div><br> -->
{% endfor %}

  <p>{{error_message}}</p>
    <h1>{{song}}</h1>
    <p>{{lyrics|safe}}</p>
  
</div> 

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
<script>
$(document).ready(function() {
  $(".btn-outline-dark").click(function(event) {
    event.preventDefault(); // Prevent default link behavior
    var songTitle = $(this).text(); // Get the song title from the clicked link
    var artistName = $("#search_artist").val(); // Get the artist name from the input field

    // Make an AJAX request to fetch lyrics for the selected song
    $.ajax({
      url: "/get_lyrics",
      method: "POST",
      data: {
        artist: artistName,
        title: songTitle
      },
      success: function(response) {
        $("#song").text(songTitle); // Update the song title heading
        $("#lyrics").html(response.lyrics); // Update the lyrics content
      }
    });
  });
});
</script>

</body>
</html>